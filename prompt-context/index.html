
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../loading/">
      
      
        <link rel="next" href="../privacy/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.1">
    
    
      
        <title>Prompts with RAG Pattern - Jarvis</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.72749a73.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#prompt-template" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Jarvis" class="md-header__button md-logo" aria-label="Jarvis" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Jarvis
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Prompts with RAG Pattern
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Jarvis" class="md-nav__button md-logo" aria-label="Jarvis" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Jarvis
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../bedrock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bedrock
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../simple/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zero shot prompt
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../RAG/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RAG
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../loading/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Loading Documents
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Prompts with RAG Pattern
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Prompts with RAG Pattern
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prompt-template" class="md-nav__link">
    Prompt Template
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../privacy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Privacy
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../chat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chat
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../csv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with CSV
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../creds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team Onboarding
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prompt-template" class="md-nav__link">
    Prompt Template
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Prompts with RAG Pattern</h1>

<p>In the previous chapter we talked about how we can load Jarvis with documents from different sources.<br />
Now lets see how we can use the Jarvis API to ask question about these docs.</p>
<p>Let's start from our last example, we uploaded two different blog posts using the website loader.
One of the blog post was about debeizum - a CDC tool that is being used in GPO engineering. </p>
<p>let's try to ask a question about that article that was written after the FM finished it's training</p>
<p>We will send a question that is very similar to the questions we send on the zero shot part, the difference in this
request is that it includes an object called the "<strong>rag</strong>"<br />
When specifying the rag object, Jarvis understand as it should take the query and first find the closest vectors to the question
and provide them as context to the FM.</p>
<p>in the rag object we have:<br />
<em> return_source_documents - if this is true, the response will contain the vectors that that Jarvis found as the closest one 
to the question and passed them as context to the model. this is useful for debugging and tuning our use of the models.<br />
</em> search_type - need to update<br />
* k - how many vectors should be retrieved from db 
* collection - on which collection of documents look for the vectors - this must be same collection where doc was loaded.</p>
<pre><code class="language-json">curl --location 'https://api.paymentsos.com/hackathon-ai/prompt' \
--header 'private-key: a4b90687-616f-4173-9774-af3cc6bd86bc' \
--header 'app-id: com.payu.3ds-latam-brazil' \
--header 'x-zooz-app-name: com.payu.3ds-latam-brazil' \
--header 'Content-Type: application/json' \
--data '{
    &quot;question&quot;: &quot;What are the reasons a debezium connector loses its binlog offset?&quot;,
    &quot;model&quot;: {
        &quot;stop_sequences&quot;: [],
        &quot;name&quot;: &quot;anthropic.claude-v2&quot;,
        &quot;max_tokens&quot;: 200,
        &quot;temperature&quot;: 0.3,
        &quot;top_k&quot;: 250,
        &quot;top_p&quot;: 0.9
    },
    &quot;rag&quot;: {
        &quot;return_source_documents&quot;: true,
        &quot;search_type&quot;: &quot;similarity&quot;,
        &quot;k&quot;: 5,
        &quot;collection&quot;: &quot;hackathon&quot;
    }
}'
</code></pre>
<p>This will be our response</p>
<pre><code class="language-json">{
    &quot;question&quot;: &quot;What are the reasons a debezium connector loses its binlog offset?&quot;,
    &quot;result&quot;: &quot; Here are some common reasons a Debezium connector can lose its binlog offset:\n\n- MySQL server restart - This causes the binlog to be rotated, so if the connector misses this event, it will be looking for the old binlog position that no longer exists.\n\n- Connector restart - If the connector goes down uncleanly (crash, kill -9, etc), it may not have time to commit the latest offset to Kafka. Upon restart, it will resume from the last committed offset, losing any uncommitted transactions.\n\n- Unclean connector shutdown - Similar to above, if the connector is killed or crashes, any uncommitted offsets are lost.\n\n- Heartbeats disabled - The heartbeat feature periodically sends dummy events to Kafka to update the offset. If disabled, long periods of inactivity can cause the connector to lose its place.\n\n- Kafka retention issues - If Kafka purges messages or offsets stored in __consumer_offsets before the&quot;,
    &quot;source_documents&quot;: [
        {
            &quot;page_content&quot;: &quot;was among the early adopters of Debezium, which led us to face several challenges throughout the process. However, over time, we grew more confident and gained a deeper understanding of the necessary steps we had to make in order to improve our Debezium implementation.We encountered a few minor issues, often originating from misconfigured connectors. However, the most important topic we‚Äôll discuss is when a connector loses its binlog offset.As mentioned earlier, every connector can be&quot;,
            &quot;metadata&quot;: {
                &quot;source&quot;: &quot;https://medium.com/payu-engineering/unlocking-the-power-of-debezium-69ce9170f101&quot;,
                &quot;title&quot;: &quot;Unlocking the Power of Debezium. This blog post aims to share our‚Ä¶ | by Tomer Guttman | payu-engineering | Aug, 2023 | Medium&quot;,
                &quot;description&quot;: &quot;This blog post aims to share our experience, and insights with Debezium (CDC Tool), and the development phases we went through to improve reliability, and observability while capturing data changes‚Ä¶&quot;,
                &quot;language&quot;: &quot;en&quot;
            }
        },
        {
            &quot;page_content&quot;: &quot;was among the early adopters of Debezium, which led us to face several challenges throughout the process. However, over time, we grew more confident and gained a deeper understanding of the necessary steps we had to make in order to improve our Debezium implementation.We encountered a few minor issues, often originating from misconfigured connectors. However, the most important topic we‚Äôll discuss is when a connector loses its binlog offset.As mentioned earlier, every connector can be&quot;,
            &quot;metadata&quot;: {
                &quot;source&quot;: &quot;https://medium.com/payu-engineering/unlocking-the-power-of-debezium-69ce9170f101&quot;,
                &quot;title&quot;: &quot;Unlocking the Power of Debezium. This blog post aims to share our‚Ä¶ | by Tomer Guttman | payu-engineering | Aug, 2023 | Medium&quot;,
                &quot;description&quot;: &quot;This blog post aims to share our experience, and insights with Debezium (CDC Tool), and the development phases we went through to improve reliability, and observability while capturing data changes‚Ä¶&quot;,
                &quot;language&quot;: &quot;en&quot;
            }
        },
        {
            &quot;page_content&quot;: &quot;from two tables ‚Äî the original table but also changes of the debezium_heartbeat table.With heartbeat set to occur once an hour, we can be certain that the connector‚Äôs offset will remain up-to-date ‚Äî This is due to the connector capturing changes from both tables, effectively storing the latest offset out of both within the binlog.Our connector configuration now looks as such in v2.3.0.{   \&quot;name\&quot;:\&quot;debezium-packages-connector-sandbox\&quot;,&quot;,
            &quot;metadata&quot;: {
                &quot;source&quot;: &quot;https://medium.com/payu-engineering/unlocking-the-power-of-debezium-69ce9170f101&quot;,
                &quot;title&quot;: &quot;Unlocking the Power of Debezium. This blog post aims to share our‚Ä¶ | by Tomer Guttman | payu-engineering | Aug, 2023 | Medium&quot;,
                &quot;description&quot;: &quot;This blog post aims to share our experience, and insights with Debezium (CDC Tool), and the development phases we went through to improve reliability, and observability while capturing data changes‚Ä¶&quot;,
                &quot;language&quot;: &quot;en&quot;
            }
        },
        {
            &quot;page_content&quot;: &quot;from two tables ‚Äî the original table but also changes of the debezium_heartbeat table.With heartbeat set to occur once an hour, we can be certain that the connector‚Äôs offset will remain up-to-date ‚Äî This is due to the connector capturing changes from both tables, effectively storing the latest offset out of both within the binlog.Our connector configuration now looks as such in v2.3.0.{   \&quot;name\&quot;:\&quot;debezium-packages-connector-sandbox\&quot;,&quot;,
            &quot;metadata&quot;: {
                &quot;source&quot;: &quot;https://medium.com/payu-engineering/unlocking-the-power-of-debezium-69ce9170f101&quot;,
                &quot;title&quot;: &quot;Unlocking the Power of Debezium. This blog post aims to share our‚Ä¶ | by Tomer Guttman | payu-engineering | Aug, 2023 | Medium&quot;,
                &quot;description&quot;: &quot;This blog post aims to share our experience, and insights with Debezium (CDC Tool), and the development phases we went through to improve reliability, and observability while capturing data changes‚Ä¶&quot;,
                &quot;language&quot;: &quot;en&quot;
            }
        },
        {
            &quot;page_content&quot;: &quot;it debezium_connect_offsets.As seen in the Kafka UI screenshot below, within the specific topic dedicated to Debezium offsets, we can see that the most recent offset message for the packages_sandbox connector is listed as 1435109 (pos).Offset message of ‚Äúpackages‚Äù connector, storing its latest recorded offsetIt is crucial to understand the following:A binlog contains changes from all the tables within MySQL, not only from the tables we‚Äôve configured the connector to capture changes&quot;,
            &quot;metadata&quot;: {
                &quot;source&quot;: &quot;https://medium.com/payu-engineering/unlocking-the-power-of-debezium-69ce9170f101&quot;,
                &quot;title&quot;: &quot;Unlocking the Power of Debezium. This blog post aims to share our‚Ä¶ | by Tomer Guttman | payu-engineering | Aug, 2023 | Medium&quot;,
                &quot;description&quot;: &quot;This blog post aims to share our experience, and insights with Debezium (CDC Tool), and the development phases we went through to improve reliability, and observability while capturing data changes‚Ä¶&quot;,
                &quot;language&quot;: &quot;en&quot;
            }
        }
    ]
}
</code></pre>
<p>as mentioned above, we will get the source_documeants in the response to help us debug why we got the answer we got and an answer to our question.</p>
<h3 id="prompt-template">Prompt Template</h3>
<p>One of the features many FM supports is sending instructions to the model to answer your questions.<br />
Most of you saw chatGPT prompts that asks for a brief answer as a pirate.
While we can send these instructions to the FM we are working with, this instructions will go to RAG pattern
as well as they are part of the questions and will affect the vectors that are found.</p>
<p>To solve this we are happy to introduce the prompt_template:  </p>
<p>see this request for example:</p>
<pre><code class="language-json">curl --location 'https://api.paymentsos.com/hackathon-ai/prompt' \
--header 'private-key: replaceme' \
--header 'app-id: replaceme' \
--header 'Content-Type: application/json' \
--data '{
    &quot;prompt_template&quot;: &quot;Answer the following questions as best you can, but speaking as a pirate might speak. Use lots of \&quot;Arg\&quot;s.\nBegin\n\nHuman: {question}\n\nContext: {context}\n\nAssistant:&quot;,
    &quot;question&quot;: &quot;What are the reasons a debezium connector loses its binlog offset?&quot;,
    &quot;model&quot;: {
        &quot;stop_sequences&quot;: [],
        &quot;name&quot;: &quot;anthropic.claude-v2&quot;,
        &quot;max_tokens&quot;: 200,
        &quot;temperature&quot;: 0.3,
        &quot;top_k&quot;: 250,
        &quot;top_p&quot;: 0.9
    },
    &quot;rag&quot;: {
        &quot;return_source_documents&quot;: true,
        &quot;search_type&quot;: &quot;similarity&quot;,
        &quot;k&quot;: 5,
        &quot;collection&quot;: &quot;hackathon&quot;
    }
}'
</code></pre>
<p>And the response:</p>
<pre><code class="language-json">{
    &quot;question&quot;: &quot;What are the reasons a debezium connector loses its binlog offset?&quot;,
    &quot;result&quot;: &quot; Arr matey, there be a few reasons a Debezium connector could be losin' its place in the binlog:\n\nFirst, if the MySQL server be restarted, that wipes the binlog clean and the connector won't know where it left off. So you gotta be careful not to restart the server if ye can help it, else the connector will start over from the beginning.\n\nSecond, network issues can cause the connector to lose its connection. If it can't keep talkin' to the MySQL server, it may miss some binlog events and lose track of the latest position. \n\nAnd third, sometimes the connector offset gets out o' sync if Debezium's heartbeat don't match up with the actual binlog position. That's why it be important to keep an eye on both and make sure they line up proper.\n\nBut don't be despairin'! There be ways to make sure your connector don't lose&quot;,
}
</code></pre>
<p>And if we take it more seriously, lets try this:  </p>
<pre><code class="language-json">curl --location 'https://api.paymentsos.com/hackathon-ai/prompt' \
--header 'private-key: a4b90687-616f-4173-9774-af3cc6bd86bc' \
--header 'private-key: replaceme' \
--header 'app-id: replaceme' \
--header 'Content-Type: application/json' \
--data '{
    &quot;prompt_template&quot;: &quot;Answer the  briefly in bullets and as you were a sales person.\nBegin\n\nHuman: {question}\n\nContext: {context}\n\nAssistant:&quot;,
    &quot;question&quot;: &quot;What are the reasons a debezium connector loses its binlog offset?&quot;,
    &quot;model&quot;: {
        &quot;stop_sequences&quot;: [],
        &quot;name&quot;: &quot;anthropic.claude-v2&quot;,
        &quot;max_tokens&quot;: 1000,
        &quot;temperature&quot;: 0.3,
        &quot;top_k&quot;: 250,
        &quot;top_p&quot;: 0.9
    },
    &quot;rag&quot;: {
        &quot;return_source_documents&quot;: true,
        &quot;search_type&quot;: &quot;similarity&quot;,
        &quot;k&quot;: 5,
        &quot;collection&quot;: &quot;hackathon&quot;
    }
}'
</code></pre>
<p>we will get this</p>
<pre><code class="language-json">{
    &quot;question&quot;: &quot;What are the reasons a debezium connector loses its binlog offset?&quot;,
    &quot;result&quot;: &quot; Here are some common reasons a Debezium connector can lose its binlog offset:\n\n- MySQL server is restarted - This causes the binlog to be rotated, so the connector loses its place\n\n- Connector is stopped for too long - If the connector is down for longer than the MySQL binary log expiration period, the logs it needs may be deleted\n\n- Heartbeat configuration issue - If heartbeats are not configured properly, the connector may not be updating its offset frequently enough\n\n- Kafka retention issues - If Kafka is not retaining the offset topic long enough, offset messages may be deleted \n\n- Connector configuration error - An error in the connector configuration, such as the database or table whitelist, can cause offset issues\n\n- MySQL GTID mode not enabled - Debezium requires GTID mode to accurately track binlog positions \n\n- DB snapshot followed by purge - If a snapshot is followed by a BINLOG PURGE, the connector's recorded offset may be purged\n\n- DB admin intervention - An admin may have manually purged logs, inadvertently deleting offsets \n\n- Kafka Connect rebalance - Offsets may not be committed properly during a Connect cluster rebalance\n\nSo in summary - restarting MySQL, long connector downtime, Kafka retention, Connect errors, and admin actions on the db can all lead to lost offsets. Proper connector setup and config can mitigate many issues.&quot;,}
</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.4e0fa4ba.min.js"></script>
      
    
  </body>
</html>